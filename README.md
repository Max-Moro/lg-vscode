# Listing Generator — VS Code Extension

> Интерактивный UI для работы с Listing Generator CLI: генерация контекстов, управление секциями, отправка в AI — все в привычном интерфейсе VS Code.

---

## Что это

**VS Code Extension для [Listing Generator](../README.md)** — графическая оболочка над мощным CLI-инструментом формирования AI-контекстов.

Расширение автоматизирует рутину:
- **Не нужно помнить команды** — все действия через панели и кнопки
- **Визуальная настройка** — режимы, теги, фильтры файлов в удобных формах
- **Мгновенная отправка в AI** — интеграция с Copilot, Cursor, Claude, OpenAI API из одной кнопки
- **Живая статистика** — видите размер контекста и расход токенов до отправки

---

## Основные возможности

### Control Panel
Центральная панель управления:
- Выбор контекстов и секций из `lg-cfg/`
- Адаптивные настройки: режимы работы (ask/agent, planning/development/review), наборы тегов
- Динамическое описание текущей задачи (task context)
- Управление токенизацией (tiktoken, HuggingFace tokenizers, sentencepiece)

### AI Integration
Прямая отправка контекстов в AI:
- **Clipboard** — копирование для любого чата
- **GitHub Copilot** — отправка в Copilot Chat
- **Cursor Composer** — интеграция с Cursor IDE
- **Claude CLI** — через терминальный клиент
- **OpenAI API** — прямая сетевая отправка (хранение токенов через VS Code Secrets)

Автоматическое определение доступных провайдеров при первом запуске.

### Визуализация и диагностика
- **Included Files Tree** — дерево файлов, попадающих в контекст после фильтрации
- **Stats Webview** — детальная статистика по токенам, группировка файлов, экономия от адаптеров
- **Doctor** — диагностика окружения, миграции `lg-cfg/`, состояние кэша

### Автоматизация
- **Managed venv** — автоматическая установка CLI в изолированное окружение
- **Watcher на lg-cfg/** — живое обновление списков секций/контекстов при правках конфигурации
- **Миграции конфигов** — встроенная поддержка миграций формата `lg-cfg/` (совместимость с CLI)

---

## Быстрый старт

1. **Установите расширение** из VS Code Marketplace (или `.vsix` файла)
2. **Откройте проект с `lg-cfg/`** — расширение автоматически активируется
3. **Первый запуск**: Extension предложит установить CLI (через managed venv или системный Python)
4. **Откройте панель "LG — Control Panel"** в боковой панели Activity Bar
5. **Выберите контекст/секцию**, настройте режимы и теги, нажмите "Send to AI"

Если `lg-cfg/` ещё нет — используйте команду **"LG: Create Starter Config"** для инициализации стандартной структуры.

---

## Документация

- [Listing Generator CLI](../README.md) — основная документация по CLI и формату `lg-cfg/`
- [Шаблоны и контексты](../docs/templates.md) — шаблонизация промтов
- [Адаптивные возможности](../docs/adaptability.md) — режимы, теги, условная логика
- [Языковые адаптеры](../docs/adapters.md) — оптимизация листингов

---

## Настройки

Основные параметры (Settings → Extensions → Listing Generator):
- `lg.ai.provider` — провайдер для отправки в AI (clipboard, copilot, cursor, claude.cli, openai.api)
- `lg.install.strategy` — стратегия установки CLI (managedVenv, system, pipx)
- `lg.python.interpreter` — путь к Python интерпретатору (для managed venv)
- `lg.cli.path` — явный путь к CLI (если установлен вручную)
- `lg.openAsEditable` — открывать результаты как редактируемые файлы (вместо read-only виртуальных документов)
