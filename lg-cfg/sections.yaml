src:
  extensions: [".ts", ".json", ".html", ".css", ".js"]
  filters:
    mode: allow
    allow:
      - "/src/"
      - "/media/"
      - "/package.json"
    children:
      media:
        mode: allow
        when:
          - condition: >
              TAGSET:vscode-extension:ui-core OR
              TAGSET:vscode-extension:control OR
              TAGSET:vscode-extension:stats OR
              TAGSET:vscode-extension:diag
            allow:
              - "base.css"
              - "common.js"
              - "/ui/core/"
              - "/ui/utils/"
          - condition: "TAGSET:vscode-extension:ui-components"
            allow: ["/ui/components/"]
          - condition: "TAGSET:vscode-extension:control"
            allow: 
              - "control*"
          - condition: "TAGSET:vscode-extension:stats"
            allow: 
              - "stats*"
              - "/ui/components/grouped-table/grouped-table.js"
              - "/ui/components/textarea/textarea.js"
          - condition: "TAGSET:vscode-extension:diag"
            allow: 
              - "doctor*"
              - "/ui/components/textarea/textarea.js"
      src:
        mode: allow
        when:
          - condition: "TAGSET:vscode-extension:core"
            allow:
              - "/extension.ts"
              - "/constants.ts"
              - "/logging/"
              - "/cli/CliClient.ts"
              - "/services/ContextService.ts"
              - "/services/ListingService.ts"
              - "/services/ControlStateService.ts"
              - "/webview/webviewKit.ts"
          - condition: "TAGSET:vscode-extension:cli"
            allow: ["/cli/", "/runner/"]
          - condition: "TAGSET:vscode-extension:ui-components"
            allow: ["/build-ui.ts"]
          - condition: "TAGSET:vscode-extension:control"
            allow: ["/views/ControlPanelView.ts"]
          - condition: "TAGSET:vscode-extension:catalog"
            allow:
              - "/services/CatalogService.ts"
              - "/services/GitService.ts"
              - "/models/mode_sets_list.ts"
              - "/models/tag_sets_list.ts"
          - condition: "TAGSET:vscode-extension:stats"
            allow:
              - "/views/StatsWebview.ts"
              - "/models/report.ts"
          - condition: "TAGSET:vscode-extension:diag"
            allow:
              - "/services/DoctorService.ts"
              - "/views/DoctorWebview.ts"
              - "/models/diag_report.ts"
          - condition: "TAGSET:vscode-extension:send-to-ai"
            allow:
              - "/services/ai/"
              - "/models/AiInteractionMode.ts"
              - "/models/ShellType.ts"
          - condition: "TAGSET:vscode-extension:starter"
            allow: ["/starter/StarterConfig.ts"]
          - condition: "TAGSET:vscode-extension:included-tree"
            allow: ["/views/IncludedTree.ts"]
          - condition: "TAGSET:vscode-extension:generate"
            allow:
              - "/views/VirtualDocProvider.ts"
              - "/views/virtualBus.ts"
          - condition: "TAGSET:vscode-extension:send-to-ai AND TAGSET:ai-providers:claude-code-cli"
            allow:
              - "/models/ClaudeIntegrationMethod.ts"
              - "/models/ClaudeModel.ts"
              - "/models/ShellType.ts"
          - condition: "TAGSET:vscode-extension:send-to-ai AND TAGSET:ai-providers:codex-cli"
            allow:
              - "/models/CodexReasoningEffort.ts"
              - "/models/ShellType.ts"
        children:
          services:
            mode: block
            children:
              ai:
                mode: block
                children:
                  base:
                    mode: allow
                    allow:
                      - "/BaseAiProvider.ts"
                      - "/index.ts"
                    when:
                      - condition: "TAGSET:ai-providers:github-copilot"
                        allow: ["/BaseExtensionProvider.ts"]
                      - condition: "TAGSET:ai-providers:claude-code-cli OR TAGSET:ai-providers:codex-cli"
                        allow: ["/BaseCliProvider.ts"]
                      - condition: "TAGSET:ai-providers:cursor"
                        allow: ["/BaseForkProvider.ts"]
                  providers:
                    mode: allow
                    when:
                      - condition: "TAGSET:ai-providers:clipboard"
                        allow: ["/clipboard/"]
                      - condition: "TAGSET:ai-providers:github-copilot"
                        allow: ["/copilot/"]
                      - condition: "TAGSET:ai-providers:cursor"
                        allow: ["/cursor/"]
                      - condition: "TAGSET:ai-providers:claude-code-cli"
                        allow: ["/claude-cli/"]
                      - condition: "TAGSET:ai-providers:claude-code-cli"
                        allow: ["/codex-cli/"]
